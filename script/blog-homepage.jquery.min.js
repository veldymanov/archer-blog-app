var mobileMenuTouchSlider={log:function(msg){},createSlidePanel:function(panel,width){this.width=width;try{document.createEvent('TouchEvent');this.makeTouchable(panel);}catch(e){}finally{}},makeTouchable:function(panel){$(panel).each(function(){this.addEventListener('touchstart',function(e){mobileMenuTouchSlider.touchStart($(this),e);},false);this.addEventListener('touchmove',function(e){mobileMenuTouchSlider.touchMove($(this),e);},false);this.addEventListener('touchend',function(e){mobileMenuTouchSlider.touchEnd($(this),e);},false);});},touchStart:function(elem,e){this.startX=e.targetTouches[0].clientX;this.startY=e.targetTouches[0].clientY;this.slider=0;this.startRight=this.getRight(elem);},touchMove:function(elem,e){var deltaX=e.targetTouches[0].clientX-this.startX;var deltaY=e.targetTouches[0].clientY-this.startY;if(((this.slider===0))&&(Math.abs(deltaY)>Math.abs(deltaX))){this.slider=-1;}else if(this.slider!=-1){e.preventDefault();this.slider=1;var right=this.startRight-deltaX;;if(right>0){right=0;}elem.css({right:right+'px'});}},touchEnd:function(elem,e){this.doSlide(elem,e);},getRight:function(elem){return parseInt(elem.css('right'),10);},doSlide:function(elem,e){var right=this.getRight(elem);if((Math.abs(right))<((this.width/2))){elem.animate({right:0+'px'},300);}else{elem.animate({right:-this.width+'px'},300,function(){$(this).hide();});$('#js-body').css('overflow','auto');}this.startX=null;this.startY=null;}};var articlesLoader={createArticles:function(resp,indexNmbrs){var i=$('#atcls-btn').data('loadindex');var nmbrs=indexNmbrs||4;var l;if((i+nmbrs)<resp["articles"].length){l=(i+nmbrs);}else{l=resp["articles"].length;$('#atcls-btn').attr('disabled',true);}if(i<l){for(i;i<l;i++){var atclsItem=$("<li class='atcls-item'></li>");var atcl=$("<article class='atcl "+resp["articles"][i].mobView+"'></article>");if(resp["articles"][i].mobView==="attn-mobile"){atcl.append("<figure class='atcl-fig'>"+"<img src='articles/images/"+resp["articles"][i].imgName+".desktop.jpg"+"'alt='Article "+(i+1)+", Picture'/></figure>");}else{atcl.append("<figure class='atcl-fig'>"+"<img src='articles/images/"+resp["articles"][i].imgName+".mobile.jpg"+"'alt='Article "+(i+1)+", Picture'"+"srcset = 'articles/images/"+resp["articles"][i].imgName+".mobile.jpg 640w,"+"articles/images/"+resp["articles"][i].imgName+".desktop.jpg 1200w' /></figure>");}atcl.append("<div class='atcl-txt'><h3>"+resp["articles"][i].head+"</h3><p>"+resp["articles"][i].txt+"</p></div>");atcl.append("<div class='atcl-btn'><a  href=articles/"+resp["articles"][i].atclRef+">Read More</a></div>");atclsItem.append(atcl);$('#atcls').append(atclsItem);}$('#atcls-btn').data().loadindex=l;}},loadArticles:function(nmbrs){if($('#atcls-btn').data('loadindex')===0){$.ajax('articles.json',{contextType:'application/json',dataType:'json',timeout:13000,success:function(response){articlesLoader.createArticles(response,nmbrs);articlesLoader.resp=response;},error:function(request,errorType,errorMessage){alert('Error: '+errorType+' with message: '+errorMessage);},beforeSend:function(){},complete:function(){}});}else{articlesLoader.createArticles(articlesLoader.resp);}}};jQuery(document).ready(function(){function menuSlideIn(event){event.preventDefault();$('.js-head-nav').show().animate({right:"0px"},700);$('#js-body').css('overflow','hidden');}function menuSlideOut(event){var winSize=window.innerWidth;var displ=$('.js-head-nav').css("display");var right=$('.js-head-nav').css("right");var mthMenuIcon=$(event.target).is('.js-menu-icon');var mthMenuIconEls=$('.js-menu-icon').has(event.target);var mthHdNav=$(event.target).is('.js-head-nav');var mthHdNavEls=$('.js-head-nav').has(event.target);if(winSize>640||right==="-240px"||mthMenuIcon||(mthMenuIconEls.length>0)||mthHdNav||(mthHdNavEls.length>0)){return;}else if(displ==="block"){event.preventDefault();$('.js-head-nav').animate({right:"-240px"},700,function(){$(this).hide();});$('#js-body').css('overflow','auto');}}$(document).on('click',menuSlideOut);$('.js-menu-icon').on('click',menuSlideIn);mobileMenuTouchSlider.createSlidePanel('.js-head-nav',240);articlesLoader.loadArticles(7);$("#atcls-btn").on('click',articlesLoader.loadArticles);});